<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Kakao 지도 시작하기</title>
        <style>
            /* 지도와 검색창을 위한 스타일 */
            #map {
                width: 100vw; /* 화면 너비의 100% */
                height: 80vh; /* 화면 높이의 80% */
            }
            #search-box {
                position: absolute; /* 지도의 위치를 기준으로 절대 위치 설정 */
                top: 10px; /* 지도 상단에서 10px 떨어진 위치 */
                left: 50%; /* 화면 중앙에서 왼쪽으로 정렬 */
                transform: translateX(
                    -50%
                ); /* 화면 중앙에 정확히 위치하도록 조정 */
                width: 300px; /* 검색창의 너비 */
                padding: 5px; /* 검색창의 패딩 */
                border-radius: 5px; /* 모서리 둥글게 */
                border: 1px solid #ddd; /* 테두리 색상 */
                background-color: #fff; /* 배경 색상 */
            }
            #satellite-toggle {
                position: absolute; /* 지도의 위치를 기준으로 절대 위치 설정 */
                top: 10px; /* 지도 상단에서 10px 떨어진 위치 */
                right: 10px; /* 화면 오른쪽에서 10px 떨어진 위치 */
                padding: 5px 10px; /* 버튼 패딩 */
                border-radius: 5px; /* 모서리 둥글게 */
                border: 1px solid #ddd; /* 테두리 색상 */
                background-color: #fff; /* 배경 색상 */
                cursor: pointer; /* 마우스 커서가 포인터로 변경되도록 설정 */
            }
        </style>
    </head>
    <body>
        <!-- 검색창과 위성 모드 전환 버튼을 포함한 요소 -->
        <input type="text" id="search-box" placeholder="검색어를 입력하세요" />
        <button id="satellite-toggle">위성지도</button>
        <!-- 카카오 지도를 표시할 요소 -->
        <div id="map"></div>
        <!-- 카카오 지도 API를 로드하는 스크립트 -->
        <script
            type="text/javascript"
            src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=0e8f5e0d17b2b2db13d6d4832e631119&autoload=false"
        ></script>
        <script>
            // 지도 초기화 및 설정
            var map;
            var ps; // 장소 검색 객체
            var isSatellite = false; // 위성 모드 상태

            // 카카오 맵 API 로드 후 지도 초기화
            kakao.maps.load(function () {
                // 지도 표시를 위한 HTML 요소 선택
                var container = document.getElementById('map');
                var options = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심 좌표 (위도, 경도)
                    level: 3, // 지도의 확대 수준
                };
                map = new kakao.maps.Map(container, options);

                // 장소 검색 객체 생성
                ps = new kakao.maps.services.Places();

                // 지도 타입 컨트롤 생성 및 지도에 추가
                var mapTypeControl = new kakao.maps.MapTypeControl();
                map.addControl(
                    mapTypeControl,
                    kakao.maps.ControlPosition.TOPRIGHT
                );

                // 검색창 이벤트 리스너 추가
                document
                    .getElementById('search-box')
                    .addEventListener('keypress', function (e) {
                        if (e.key === 'Enter') {
                            searchPlaces();
                        }
                    });

                // 위성지도 전환 버튼 이벤트 리스너 추가
                document
                    .getElementById('satellite-toggle')
                    .addEventListener('click', function () {
                        toggleSatelliteMode();
                    });
            });

            // 장소 검색 함수
            function searchPlaces() {
                var keyword = document.getElementById('search-box').value;
                if (!keyword.trim()) {
                    alert('검색어를 입력하세요.');
                    return;
                }

                ps.keywordSearch(keyword, function (data, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        // 검색 결과의 첫 번째 장소에 마커 추가
                        var place = data[0];
                        var position = new kakao.maps.LatLng(place.y, place.x);
                        var marker = new kakao.maps.Marker({
                            map: map,
                            position: position,
                        });
                        map.setCenter(position); // 검색 결과 위치로 지도 중심 이동
                    } else {
                        alert('검색 결과가 없습니다.');
                    }
                });
            }

            // 위성 모드 토글 함수
            function toggleSatelliteMode() {
                isSatellite = !isSatellite;
                map.setMapTypeId(
                    isSatellite
                        ? kakao.maps.MapTypeId.SKYVIEW
                        : kakao.maps.MapTypeId.ROADMAP
                );
                document.getElementById('satellite-toggle').textContent =
                    isSatellite ? '기본지도' : '위성지도';
            }
        </script>
    </body>
</html>
